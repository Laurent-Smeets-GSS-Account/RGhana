
---
title: 'R Markdown'
author: "Statistical Programming in R"
date: ""
output:
  ioslides_presentation:
    logo: logo_en.png
    smaller: yes
    widescreen: no
    self_contained: false
    lib_dir: libs
  beamer_presentation:
    colortheme: beaver
---



```{r, include = F}

library(tidyverse)
library(magrittr)
library(knitr)
library(kableExtra)
library(mice)   

inline <- function(x = "") paste0("`` `r ", x, "` ``")

#knitr::opts_chunk$set(message = F, echo = F)


dt <- mtcars[1:5, 1:6]

options("kableExtra.html.bsTable" = T) #For kableExtra with ioslides

```



<!-- ## We use the following packages -->
<!-- ```{r, message=FALSE, warning=FALSE} -->
<!-- library(magrittr) # Pipes -->
<!-- library(ggplot2)  # Plotting suite -->
<!-- library(knitr) -->
<!-- library(kableExtra) -->
<!-- ``` -->


## R Markdown

**What is it**
* R Markdown is a file format for making dynamic documents

**Who is it for**
* For communicating to decision makers, who want to focus on the conclusions, not the code behind the analysis.

* For collaborating with other data scientists (including future you!), who are interested in both your conclusions, and how you reached them (i.e. the code).

* As an environment in which to do data science, as a modern day lab notebook where you can capture not only what you did, but also what you were thinking.


## Types of R Markdown output

* blabre blabre 
  - Mere blabre 
  - Lidt mere blabre 


## R Markdown code 

<center>
<img src="RMarkdownCode.png" alt="HTML5 Icon" width = 100%>
</center>


## What does R Markdown contains

It contains three important types of content:

* An (optional) YAML header surrounded by ---s.
* Chunks of R code surrounded by ```.
* Text mixed with simple text formatting like # heading and _italics_.

## How does R Markdown works

<center>
<img src="RMarkdownMachine.png" alt="HTML5 Icon" width = 75%>
</center>

<br><br><br><br>
<br><br><br><br>


...but just push (ctrl+shift+K) the Knit icon.

# YAML

## YAML

YAML - "yet another markup language"

* Controls many "whole document" settings
* Possible to set document parameters 
* Possible to specify bibliography

RStudio creates a YAML header when starting from scratch with *File $\rightarrow$ New File $\rightarrow$ R Markdown...*

# Text

## Text

<!-- If you want to use latex just write `r str_c("$$")` 'some math' and end with two dollar signs -->

* \*italic\*  gives *italic*
* \*\*bold\**  gives **bold**
* \~\~Strikethrough\~\~ gives ~~Strikethrough~~
* superscript\^2\^subscript\~2\~ gives superscript^2^/subscript~2~ 



# Code chunks

## Code chunks

Eksamples of code chunks

````{verbatim}
```{r}
ggplot(data = mice::boys, aes(age, bmi)) +
  geom_point()
```
````


````{verbatim}
```{r}
ggplot(data = mice::boys, aes(age, bmi)) +
  geom_point()
```
````



## Tables - (normal print)

Printing tables to markdown aren't pretty. But with the package *kableExtra* it is easy to make readable tabels.

```{r}
boys %>% 
  select(-gen, -phb, -tv) %>%
  slice_head(n=5)
```

## Tables - `knitr::kable`

```{r}
boys %>% 
  select(-gen, -phb, -tv, -hc) %>%
  arrange(age) %>%
  slice_head(n=5) %>%
  knitr::kable(format = "html",
               col.names = c("Age","Height","Weight","BMI", "Region"),
               align = "ccccc",
               caption = "The 5 youngest boys")
```

## Tables - `knitr::kable` and `KableExtra`

```{r, results='asis'}
boys %>% 
  select(-gen, -phb, -tv, -hc) %>%
  arrange(age) %>%
  slice_head(n=5) %>%
  knitr::kable(col.names = c("Age","Height","Weight","BMI", "Region"),
               align = "ccccc",
               caption = "<font size=3>The 5 youngest boys</font>") %>% 
  kable_styling(bootstrap_options = c("hover"),
                full_width = FALSE, position = "left") 
```

## Figures 


<!-- ```{r, results='asis'} -->
<!-- ``` -->


## Bullet points

*   Bulleted list item 1

*   Item 2

    * Item 2a

    * Item 2b

1.  Numbered list item 1

1.  Item 2. The numbers are incremented automatically in the output.


## Writing text

If you want to use latex just write `r str_c("$$")` 'some math' and end with two dollar signs


* Get italic text. Set \*italic\* which gives you *italic*.  
* Get bold text. Set \*\*bold\** which gives you **bold**.      
* If you want to use r programming in the text use `r inline()`.


## Examples with code in text

1. We have data about `r inline('nrow(diamonds)')` diamonds.  
  1.1. We have data about `r nrow(diamonds)` diamonds.
1. Only `r inline('diamonds %>% filter(carat>2.5) %>% nrow()diamonds %>% filter(carat>2.5) %>% nrow()')` are larger than 2.5  
  1.1 Only `r diamonds %>% filter(carat>2.5) %>% nrow()` are larger than 2.5
  

<!-- ## Tables in markdown -->

<!-- Printing tables to markdown aren't pretty. But with the package *kableExtra* it is easy to make readable tabels. -->

<!-- Example (Normal print) -->

<!-- ```{r} -->
<!-- boys %>%  -->
<!--   select(-gen, -phb, -tv) %>% -->
<!--   slice_head(n=5) -->
<!-- ``` -->


<!-- ## Tables in markdown -->

<!-- Example (`knitr::kable`) -->

<!-- ```{r echo=FALSE, results='asis'} -->
<!-- boys %>%  -->
<!--   select(-gen, -phb, -tv, -hc) %>% -->
<!--   arrange(age) %>% -->
<!--   slice_head(n=5) %>% -->
<!--   knitr::kable(format = "html", -->
<!--                col.names = c("Age","Height","Weight","BMI", "Region"), -->
<!--                align = "ccccc", -->
<!--                caption = "The 5 youngest boys") -->
<!-- ``` -->

<!-- ## Example (`KableExtra`) -->

<!-- ```{r echo=FALSE, results='asis'} -->
<!-- boys %>%  -->
<!--   select(-gen, -phb, -tv, -hc) %>% -->
<!--   arrange(age) %>% -->
<!--   slice_head(n=5) %>% -->
<!--   knitr::kable(format = "html", -->
<!--                col.names = c("Age","Height","Weight","BMI", "Region"), -->
<!--                align = "ccccc", -->
<!--                caption = "The 5 youngest boys") %>%  -->
<!--   kable_styling(bootstrap_options = c("hover", "bordered"), -->
<!--                 full_width = FALSE, -->
<!--                 position = "left") #%>% -->
<!-- #    add_header_above(c(" "= 1,"Samlet"=2, "Take-none"=2, "Take-some"=2, "Take-all"=2)) -->
<!-- ``` -->


<!-- ## Example (kableExtra print) -->
<!-- ```{r} -->

<!-- mtcars %>%  -->
<!--   slice(1:5) %>%  -->
<!--   select(mpg:wt) %>% -->
<!--   rownames_to_column('cars') %>% # used to store row names (mutate deletes them) -->
<!--   mutate( -->
<!--   cyl = cell_spec(cyl, color = ifelse(cyl > 6, "white", "black"), -->
<!--                   background = ifelse(cyl > 6, "red", "white"), -->
<!--                   bold = ifelse(cyl > 6, T, F), align = "r")) %>% -->
<!--   column_to_rownames('cars') %>% # used to put row names back in place -->
<!--   kable(escape = F, table.attr = "style='width:90%;'") %>% -->
<!--   kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"), full_width = T) -->
<!-- ``` -->



## Shiny



# Practical

